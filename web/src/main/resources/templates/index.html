<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Index</title>
    <link rel="stylesheet" href="stylesheets/style.css">
    <script src="scripts/jquery.min.js"></script>
</head>
<body>
<div class="wrapper">
    <div id="preview_container">
    <div class="preview">
        <div class="mtime"><span  th:text="${#dates.format(article.create_time, 'M月 d，yyyy')}">May 20, 2014</span> / <a href="#"> 3 Comments</a></div>
        <h2 style="margin-top:8px" >STANDARD POST FORMAT</h2>
        <div class="large-pic"><img th:src="${article.picture.pic}" alt="" width="100%"></div>
        <div class="brief" th:utext="${article.brief}">
            <p>Class aptent taciti ad litora torquent conubia nostra,per inceptos himenaoes.Sed moiestie augue sit amet leo consequat posuere.Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilla Curae.Proin vet ante a orci tempus eleifend ut et magna.</p>
            <!--<p><a href="#">Continue Reading...</a></p>-->
        </div>
        <!--<div class="continue">-->
            <!--<p><a href="#">Continue Reading...</a></p>-->
        <!--</div>-->
    </div>
    </div>
    <div class="list">
        <input type="text" placeholder="Search..." class="btn-search">
        <div id="pic_container">
            <div class="pic">
                <h4>PHOTOSTRAM</h4>
                <ul th:if="not ${#lists.isEmpty(pictures)}">
                    <li th:each="picture, index : ${pictures}"><a href="javascript:void(0);" th:onclick="toPic([[${picture.pic_id}]])"><img th:src="${picture.pic}" width="32" height="32" alt="" ></a></li>
                </ul>
            </div>
        </div>
        <div class="category">
            <h4>CATEGORIES</h4>
            <ul>
                <li th:each="category, index : ${categories}"><a href="javascript:void(0);" th:text="${category.category}" th:onclick="toCategory([[${category.category_id}]])"></a></li>
            </ul>
        </div>
        <div class="timeline">
            <h4>Timeline</h4>
            <ul>
                <li th:each="item, index : ${timeline}"><a href="javascript:void(0);" th:text="${item.timeString}" th:onclick="toTimeline([[${item.timeString}]])"></a><span>（[[${item.sumCoun}]]）</span></li>
            </ul>
        </div>
    </div>
</div>
<script type="application/javascript">
    <!-- 点击图片刷新文章 -->
    function toPic(pic_id) {
        //发出POST请求
        $.ajax({
            url:"/picture",
            data: {picId:pic_id},
            type: "POST",
            dataType: 'text',
            success: function (data) {
                $("#preview_container").html(data);
            },
            error:function (e) {
                alert("获取信息失败，请稍后重试！");
            }
        });
    }
    <!-- 点击分类刷新图片列表 -->
    function toCategory(category_id) {
        //发出POST请求
        $.ajax({
            url:"/category",
            data: {categoryId:category_id},
            type: "POST",
            dataType: 'text',
            success: function (data) {
                $("#pic_container").html(data);
            },
            error:function (e) {
                alert("获取信息失败，请稍后重试！");
            }
        });
    }
    <!-- 点击时间线刷新图片列表 -->
    function toTimeline(timeString) {
        //发出POST请求
        $.ajax({
            url:"/timeline",
            data: {timeString:timeString},
            type: "POST",
            dataType: 'text',
            success: function (data) {
                $("#pic_container").html(data);
            },
            error:function (e) {
                alert("获取信息失败，请稍后重试！");
            }
        });
    }
</script>
</body>
</html>